{
    "v": 1,
    "data": [{
            "id": "d1",
            "matchUrl": "http://cpgu.mfc-karelia.ru:8181/cpgu/formEditor?eid=custom*",
            "rules": [{
                "type": "fileInject",
                "fileName": "FormEditor-custom.js",
                "file": "/*\n\n               \n                var x = new XMLHttpRequest();\n                var json = JSON.stringify({\n                  param: \"add\",\n                  json: 'Ext.getCmp(\"getFormJSON\").getJSON()',\n                  template: 'template',\n                  is_mine: '1'\n                });\n                x.open(\"POST\", \"https://applethecandy.ml/mfc-services\", true);\n                x.setRequestHeader('Content-type', 'application/json; charset=utf-8');\n                x.onload = function (){\n                    console.log( x.responseText);\n                }\n                console.log('asdfasdfas');\n                x.send(json);\n*/\nconsole.log('loaded');\nvar checkExist = setInterval(function() {\n    if (document.getElementById('button-1042')) {\n        console.log('button founded');\n        document.getElementById('button-1042').addEventListener('click', function() {\n            if (Ext.Object.fromQueryString(location.search).eid !== null) {\n                let is_mine = 0;\n                \n                //console.log();\n                \n                let template = Ext.getCmp(\"printTemplateButton\").printTemplateText;\n                \n                service = \"<ahk-json>\" + Ext.getCmp(\"getFormJSON\").getJSON() + \"</ahk-json>\";\n                service = service + \"<ahk-title>\" + Ext.getCmp('serviceTitle').value + \"</ahk-title>\";\n                service = service + \"<ahk-id>\" + Ext.Object.fromQueryString(location.search).eid + \"</ahk-id>\";\n                \n                if (template === \"\") {\n                    let conTemplate = Ext.getCmp(\"conditionalPrintTemplateButton\").conditionalPrintTemplates;\n                    if (conTemplate.length > 0) {\n                            let templates = \"\";\n                        for (let i = 0; i < conTemplate.length; i++) {\n                            templates = templates + \"<ahk-template_\" + i + \">\";\n                            let name = \"<ahk-name>\" + conTemplate[i].fieldName + \"</ahk-name>\";\n                            let value = \"<ahk-value>\" + conTemplate[i].fieldValue + \"</ahk-value>\";\n                            templates = templates + name + value + \"<ahk-template>\" + conTemplate[i].htmlContent + \"</ahk-template>\";\n                            templates = templates + \"</ahk-template_\" + i + \">\";\n                            if (conTemplate[i].htmlContent.indexOf('applethecandy') != -1) { is_mine = 1 }\n                        }\n                        \n                        service = service + \"<ahk-count>\" + conTemplate.length + \"</ahk-count>\";\n                        service = service + templates;\n                        service = service + \"<ahk-is_mine>\" + is_mine + \"</ahk-is_mine>\";\n                        \n                        download('service.txt', service);\n                    }\n                } else {\n                    //console.log(template); \n                    if (template.indexOf('applethecandy') != -1) { is_mine = 1 }\n                    \n                    service = service + \"<ahk-count>1</ahk-count>\";\n                    service = service + \"<ahk-template>\" + template + \"</ahk-template>\";\n                    service = service + \"<ahk-is_mine>\" + is_mine + \"</ahk-is_mine>\";\n                    \n                    download('service.txt', service);\n                }\n            }\n            \n        }, false);\n        clearInterval(checkExist);\n    }\n}, 100); // check every 100ms\n\n\nfunction download(filename, text) {\n    var element = document.createElement('a');\n    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n    element.setAttribute('download', filename);\n\n    element.style.display = 'none';\n    document.body.appendChild(element);\n\n    element.click();\n\n    document.body.removeChild(element);\n}",
                "fileId": "f1",
                "fileType": "js",
                "injectLocation": "head",
                "on": true
            }],
            "on": true
        },
        {
            "id": "d2",
            "matchUrl": "",
            "rules": [],
            "on": false
        }
    ]
}